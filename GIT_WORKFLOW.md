# Git Workflow –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏—è–º–∏ Beta –∏ Main

## üéØ –ü—Ä–æ–±–ª–µ–º–∞
–ü—Ä–∏ merge –∏–∑ –≤–µ—Ç–∫–∏ `beta` –≤ `main` –Ω—É–∂–Ω–æ, —á—Ç–æ–±—ã –≤–µ—Ä—Å–∏—è –æ—Å—Ç–∞–≤–∞–ª–∞—Å—å —Ä–∞–∑–Ω–æ–π:
- **beta**: `v1.3.0 | Beta`
- **main**: `v1.3.0 | Stable`

## ‚úÖ –†–µ—à–µ–Ω–∏–µ: –§–∞–π–ª version.py

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞
–í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤–µ—Ä—Å–∏–∏ —Ç–µ–ø–µ—Ä—å –≤ —Ñ–∞–π–ª–µ `version.py`:
```python
__version__ = "1.3.0"
__status__ = "Beta"  # –∏–ª–∏ "Stable" –≤ main
```

---

## üìã Workflow –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–µ—Ç–∫–∞–º–∏

### 1. –†–∞–±–æ—Ç–∞ –≤ –≤–µ—Ç–∫–µ Beta

```bash
# –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ beta
git checkout beta

# –í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥
# –û–±–Ω–æ–≤–∏—Ç—å version.py:
# __version__ = "1.3.0"
# __status__ = "Beta"

git add .
git commit -m "feat: –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏"
git push origin beta
```

### 2. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–µ–ª–∏–∑—É –≤ Main

#### –í–∞—Ä–∏–∞–Ω—Ç –ê: –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# 1. –ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å—Å—è –Ω–∞ main
git checkout main

# 2. –°–ª–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –∏–∑ beta
git merge beta

# 3. –ï—Å–ª–∏ –µ—Å—Ç—å –∫–æ–Ω—Ñ–ª–∏–∫—Ç –≤ version.py, —Ä–∞–∑—Ä–µ—à–∏—Ç—å –µ–≥–æ:
#    –û—Å—Ç–∞–≤–∏—Ç—å __status__ = "Stable" –≤ main

# 4. –û–±–Ω–æ–≤–∏—Ç—å version.py –≤—Ä—É—á–Ω—É—é:
#    __version__ = "1.3.0"
#    __status__ = "Stable"

git add version.py
git commit -m "release: v1.3.0 stable"
git push origin main
```

#### –í–∞—Ä–∏–∞–Ω—Ç –ë: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å—Ç—Ä–∞—Ç–µ–≥–∏—è —Å–ª–∏—è–Ω–∏—è

```bash
# –ù–∞—Å—Ç—Ä–æ–∏—Ç—å Git –æ–¥–∏–Ω —Ä–∞–∑ (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ —á–µ—Ä–µ–∑ .gitattributes):
git config merge.ours.driver true

# –¢–µ–ø–µ—Ä—å –ø—Ä–∏ merge version.py –≤—Å–µ–≥–¥–∞ –±—É–¥–µ—Ç –±—Ä–∞—Ç—å –≤–µ—Ä—Å–∏—é –∏–∑ —Ç–µ–∫—É—â–µ–π –≤–µ—Ç–∫–∏
git checkout main
git merge beta
# version.py –æ—Å—Ç–∞–Ω–µ—Ç—Å—è —Å __status__ = "Stable"

git push origin main
```

---

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ—Ç–æ–∫

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ—Ç–∫–∏ Beta
```bash
git checkout beta

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å version.py:
# __status__ = "Beta"

git add version.py
git commit -m "chore: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å Beta"
git push origin beta
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–µ—Ç–∫–∏ Main
```bash
git checkout main

# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å version.py:
# __status__ = "Stable"

git add version.py
git commit -m "chore: —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å Stable"
git push origin main
```

---

## üìù –ü—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã

### ‚úÖ DO (–î–µ–ª–∞—Ç—å):
1. **–í—Å–µ–≥–¥–∞ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –≤ beta**
2. **–û–±–Ω–æ–≤–ª—è—Ç—å `__version__` –≤ –æ–±–µ–∏—Ö –≤–µ—Ç–∫–∞—Ö –æ–¥–∏–Ω–∞–∫–æ–≤–æ**
3. **–î–µ—Ä–∂–∞—Ç—å `__status__` —Ä–∞–∑–Ω—ã–º**: Beta –≤ beta, Stable –≤ main
4. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ beta –ø–µ—Ä–µ–¥ merge –≤ main**
5. **–°–æ–∑–¥–∞–≤–∞—Ç—å —Ç–µ–≥–∏ –ø–æ—Å–ª–µ —Ä–µ–ª–∏–∑–∞ –≤ main**: `git tag v1.3.0`

### ‚ùå DON'T (–ù–µ –¥–µ–ª–∞—Ç—å):
1. **–ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å –Ω–∞–ø—Ä—è–º—É—é –≤ main** (—Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ merge –∏–∑ beta)
2. **–ù–µ –∑–∞–±—ã–≤–∞—Ç—å –æ–±–Ω–æ–≤–ª—è—Ç—å version.py** –ø–µ—Ä–µ–¥ —Ä–µ–ª–∏–∑–æ–º
3. **–ù–µ –º–µ—Ä–∂–∏—Ç—å –≤ main –±–µ–∑ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤ beta**

---

## üöÄ –ü—Ä–∏–º–µ—Ä –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ —Ä–µ–ª–∏–∑–∞

```bash
# 1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤ beta
git checkout beta
# ... –¥–µ–ª–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è ...
# –û–±–Ω–æ–≤–ª—è–µ–º version.py: __version__ = "1.4.0", __status__ = "Beta"
git add .
git commit -m "feat: –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏—è"
git push origin beta

# 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ beta
# ... —Ç–µ—Å—Ç–∏—Ä—É–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ ...

# 3. –†–µ–ª–∏–∑ –≤ main
git checkout main
git merge beta

# 4. –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å –Ω–∞ Stable (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å version.py: __status__ = "Stable"
git add version.py
git commit -m "release: v1.4.0 stable"

# 5. –°–æ–∑–¥–∞—Ç—å —Ç–µ–≥
git tag -a v1.4.0 -m "Release v1.4.0"
git push origin main --tags

# 6. –í–µ—Ä–Ω—É—Ç—å—Å—è –≤ beta –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
git checkout beta
```

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–µ—Ä—Å–∏—é –≤ beta
git checkout beta
cat version.py | grep __status__
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: __status__ = "Beta"

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤–µ—Ä—Å–∏—é –≤ main
git checkout main
cat version.py | grep __status__
# –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: __status__ = "Stable"
```

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Git Hooks

–°–æ–∑–¥–∞—Ç—å `.git/hooks/post-checkout`:
```bash
#!/bin/bash
BRANCH=$(git rev-parse --abbrev-ref HEAD)

if [ "$BRANCH" = "main" ]; then
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Stable –≤ main
    sed -i 's/__status__ = "Beta"/__status__ = "Stable"/g' version.py
elif [ "$BRANCH" = "beta" ]; then
    # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Beta –≤ beta
    sed -i 's/__status__ = "Stable"/__status__ = "Beta"/g' version.py
fi
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ environment variables

–ú–æ–∂–Ω–æ —Ç–∞–∫–∂–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```python
# version.py
import os
__version__ = "1.3.0"
__status__ = os.getenv("APP_STATUS", "Beta")
```

–¢–æ–≥–¥–∞ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ:
```bash
# –î–ª—è beta
python main.py

# –î–ª—è stable
APP_STATUS=Stable python main.py
```

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Git

```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ä–∞–∑–ª–∏—á–∏—è –º–µ–∂–¥—É –≤–µ—Ç–∫–∞–º–∏
git diff main..beta version.py

# –û—Ç–º–µ–Ω–∏—Ç—å merge (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ—à–ª–æ –Ω–µ —Ç–∞–∫)
git merge --abort

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∫–æ–º–º–∏—Ç–æ–≤
git log --oneline --graph --all

# –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –≤–µ—Ç–∫—É –¥–ª—è —Ñ–∏—á–∏
git checkout -b feature/new-feature beta

# –£–¥–∞–ª–∏—Ç—å –ª–æ–∫–∞–ª—å–Ω—É—é –≤–µ—Ç–∫—É
git branch -d feature/old-feature

# –û–±–Ω–æ–≤–∏—Ç—å beta –∏–∑ main (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å)
git checkout beta
git merge main
```

---

## üéØ –ò—Ç–æ–≥

–¢–µ–ø–µ—Ä—å —É –≤–∞—Å –µ—Å—Ç—å:
1. ‚úÖ –§–∞–π–ª `version.py` –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–µ—Ä—Å–∏–µ–π
2. ‚úÖ –§–∞–π–ª `.gitattributes` –¥–ª—è —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ —Å–ª–∏—è–Ω–∏—è
3. ‚úÖ –ß—ë—Ç–∫–∏–π workflow –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –≤–µ—Ç–∫–∞–º–∏
4. ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–æ–º Beta/Stable

**–ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ:** –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ `version.py` –ø–æ—Å–ª–µ merge!
